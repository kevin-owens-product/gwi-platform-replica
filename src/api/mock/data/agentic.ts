import type { AgenticCapability, AgenticFlow, AgenticPlatformLinkage, AgenticRun } from '../../types/agentic'

export const agenticCapabilities: AgenticCapability[] = [
  {
    id: 'cap-brief-interpreter',
    name: 'Brief Interpreter',
    type: 'agent',
    category: 'Orchestration',
    description: 'Classifies the brief, extracts objectives, audiences, markets, and desired outputs.',
    inputs: ['brief_text', 'audience_context', 'market_context'],
    outputs: ['structured_brief', 'intent_tags'],
  },
  {
    id: 'cap-workflow-orchestrator',
    name: 'Workflow Orchestrator',
    type: 'agent',
    category: 'Orchestration',
    description: 'Creates a project workspace and sequences the right tools and agents.',
    inputs: ['structured_brief', 'capability_inventory'],
    outputs: ['workflow_plan', 'workspace_id'],
    dependencies: ['cap-brief-interpreter'],
  },
  {
    id: 'cap-data-harmonizer',
    name: 'Data Harmonizer',
    type: 'agent',
    category: 'Data Harmonization',
    description: 'Merges GWI, first-party, and external data with provenance tracking.',
    inputs: ['gwi_data', 'first_party_data', 'external_data'],
    outputs: ['harmonized_dataset', 'provenance_log'],
  },
  {
    id: 'cap-audience-profiler',
    name: 'Audience Profiler',
    type: 'agent',
    category: 'Audience & Profiling',
    description: 'Builds and validates audiences, sizes segments, and surfaces personas.',
    inputs: ['harmonized_dataset', 'audience_rules'],
    outputs: ['audience_id', 'persona_summary'],
    dependencies: ['cap-data-harmonizer'],
  },
  {
    id: 'cap-crosstab-analyst',
    name: 'Crosstab Analyst',
    type: 'tool',
    category: 'Analysis & Crosstab',
    description: 'Runs statistical comparisons, significance checks, and lifts.',
    inputs: ['audience_id', 'variables', 'metrics'],
    outputs: ['crosstab_table', 'significance_report'],
    dependencies: ['cap-audience-profiler'],
  },
  {
    id: 'cap-narrative-agent',
    name: 'Narrative Agent',
    type: 'agent',
    category: 'Narrative & Knowledge',
    description: 'Transforms analysis into insight narratives with tone-of-voice controls.',
    inputs: ['crosstab_table', 'knowledge_base', 'brand_tone'],
    outputs: ['insight_summary', 'story_beats'],
    dependencies: ['cap-crosstab-analyst'],
  },
  {
    id: 'cap-visualization-agent',
    name: 'Visualization Agent',
    type: 'agent',
    category: 'Visualization & Packaging',
    description: 'Builds charts, dashboards, and slide-ready assets.',
    inputs: ['insight_summary', 'chart_specs'],
    outputs: ['charts', 'dashboard', 'deck'],
    dependencies: ['cap-narrative-agent'],
  },
  {
    id: 'cap-governance-agent',
    name: 'Governance Agent',
    type: 'agent',
    category: 'Governance & Compliance',
    description: 'Validates insights against source data and compliance rules.',
    inputs: ['insight_summary', 'provenance_log'],
    outputs: ['validation_report', 'citation_bundle'],
    dependencies: ['cap-narrative-agent'],
  },
  {
    id: 'cap-connector-agent',
    name: 'Connector Agent',
    type: 'agent',
    category: 'Delivery & Connectors',
    description: 'Pushes outputs to client systems and MCP endpoints.',
    inputs: ['deck', 'dashboard', 'exports'],
    outputs: ['delivery_receipts'],
    dependencies: ['cap-visualization-agent'],
  },
  {
    id: 'cap-advisor-agent',
    name: 'Advisor Agent',
    type: 'agent',
    category: 'Proactivity & ROI',
    description: 'Monitors change and suggests next steps with ROI feedback loops.',
    inputs: ['campaign_results', 'alerts'],
    outputs: ['recommendations', 'learning_updates'],
  },
]

export const agenticFlows: AgenticFlow[] = [
  {
    id: 'flow-brief-interpretation',
    name: 'Brief Interpretation Flow',
    description: 'Transforms an unstructured brief into a guided workflow and outputs.',
    triggers: ['incoming_brief', 'agent_spark_prompt'],
    steps: [
      {
        id: 'step-brief',
        name: 'Brief Interpreter',
        capability_id: 'cap-brief-interpreter',
        description: 'Extract objectives, audiences, markets, and outputs.',
        output_artifacts: ['structured_brief'],
      },
      {
        id: 'step-workflow',
        name: 'Workflow Orchestrator',
        capability_id: 'cap-workflow-orchestrator',
        description: 'Create workspace and route to analysis tools.',
        depends_on: ['step-brief'],
        output_artifacts: ['workspace_id'],
      },
      {
        id: 'step-analysis',
        name: 'Analysis & Audience',
        capability_id: 'cap-audience-profiler',
        description: 'Run background analysis and identify key lifts.',
        depends_on: ['step-workflow'],
        output_artifacts: ['audience_id', 'persona_summary'],
      },
      {
        id: 'step-narrative',
        name: 'Narrative & Knowledge',
        capability_id: 'cap-narrative-agent',
        description: 'Translate into contextual insight narrative.',
        depends_on: ['step-analysis'],
        output_artifacts: ['insight_summary'],
      },
      {
        id: 'step-advisor',
        name: 'Advisor',
        capability_id: 'cap-advisor-agent',
        description: 'Prompt next steps or follow-up actions.',
        depends_on: ['step-narrative'],
        output_artifacts: ['recommendations'],
      },
    ],
  },
  {
    id: 'flow-campaign-lifecycle',
    name: 'End-to-End Campaign Flow',
    description: 'Automates the full campaign lifecycle from audience to ROI.',
    triggers: ['campaign_brief', 'post_campaign_data'],
    steps: [
      {
        id: 'step-audience',
        name: 'Audience Profiling',
        capability_id: 'cap-audience-profiler',
        description: 'Identify and size target segments.',
        output_artifacts: ['audience_id'],
      },
      {
        id: 'step-crosstab',
        name: 'Analysis (Crosstab)',
        capability_id: 'cap-crosstab-analyst',
        description: 'Analyze opportunities and behaviors.',
        depends_on: ['step-audience'],
        output_artifacts: ['crosstab_table'],
      },
      {
        id: 'step-narrative',
        name: 'Narrative',
        capability_id: 'cap-narrative-agent',
        description: 'Produce actionable recommendations.',
        depends_on: ['step-crosstab'],
        output_artifacts: ['insight_summary'],
      },
      {
        id: 'step-workflow',
        name: 'Workflow',
        capability_id: 'cap-workflow-orchestrator',
        description: 'Automate report generation and templates.',
        depends_on: ['step-narrative'],
        output_artifacts: ['report', 'dashboard'],
      },
      {
        id: 'step-advisor',
        name: 'Advisor',
        capability_id: 'cap-advisor-agent',
        description: 'Track ROI and learning loops.',
        depends_on: ['step-workflow'],
        output_artifacts: ['learning_updates'],
      },
    ],
  },
]

export const agenticLinkages: AgenticPlatformLinkage[] = [
  {
    id: 'link-platform-api',
    name: 'GWI Platform API',
    description: 'Analysis, audience, variables, exports and dashboards.',
    endpoints: ['GET /platform/api/v1/analysis', 'GET /platform/api/v1/audiences', 'POST /platform/api/v1/exports'],
    auth: 'token',
  },
  {
    id: 'link-spark-api',
    name: 'Spark API',
    description: 'Natural-language insights and chat responses.',
    endpoints: ['POST /spark/api/v1/chat', 'GET /spark/api/v1/insights'],
    auth: 'token',
  },
  {
    id: 'link-spark-mcp',
    name: 'Spark MCP',
    description: 'MCP server for agent-to-agent collaboration and tool calls.',
    endpoints: ['POST /spark-api/mcp', 'GET /spark-api/mcp/health'],
    auth: 'oauth',
  },
]

export const agenticRuns: AgenticRun[] = [
  {
    id: 'run-001',
    flow_id: 'flow-brief-interpretation',
    status: 'completed',
    started_at: '2026-02-10T18:10:00Z',
    completed_at: '2026-02-10T18:12:30Z',
    brief: 'Summarize streaming bundle adoption for Gen Z creators in US/UK with a client-ready narrative.',
    outputs: [
      {
        id: 'out-001',
        label: 'Insight Summary',
        type: 'insight',
        summary: 'Gen Z creators index 1.58x for streaming bundle adoption, driven by YouTube and Netflix usage.',
      },
      {
        id: 'out-002',
        label: 'Deck Outline',
        type: 'deck',
        summary: '6-slide storyboard with audience profile, platform usage, and bundle adoption trends.',
      },
    ],
  },
  {
    id: 'run-002',
    flow_id: 'flow-campaign-lifecycle',
    status: 'running',
    started_at: '2026-02-10T18:20:00Z',
    brief: 'Plan and measure a Q2 streaming campaign targeting hybrid workers globally.',
    outputs: [
      {
        id: 'out-003',
        label: 'Crosstab Snapshot',
        type: 'crosstab',
        summary: 'Initial crosstab indicates 1.32x lift in hybrid workers for ad-supported streaming.',
      },
    ],
  },
]
